<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TERMINAL // START</title>
    <link rel="icon" type="image/png" href="images/plxeyestiny.png">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    
    <style>
        /* --- GLOBAL UI & CURSORS --- */
        * { cursor: url('images/cursor.png'), auto !important; }
        *:active { cursor: url('images/cursor-click.png'), auto !important; }

        a, button, .suggestion-item, #drawer-tab, #vault-tab, select, .handle, .toggle-btn, .link-card, .link-card * {
            cursor: url('images/link-select.png'), pointer !important;
        }
        a:active, button:active, .suggestion-item:active, #drawer-tab:active, #vault-tab:active, select:active, .link-card:active {
            cursor: url('images/link-select-click.png'), pointer !important;
        }

        body {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; margin: 0; overflow: hidden; background: black;
        }

        body.low-power { filter: brightness(0.7); }

        /* --- ENTITY VAULT (LEFT) --- */
        #entity-vault {
            position: fixed; top: 0; left: -280px; width: 280px; height: 100vh;
            background: #080808; border-right: 2px solid #222; z-index: 2000;
            transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex; flex-direction: column; padding: 25px; box-sizing: border-box;
        }
        #entity-vault.open { left: 0; }
        #vault-tab {
            position: absolute; right: -42px; top: 50%; transform: translateY(-50%);
            width: 40px; height: 100px; background: #080808; border: 2px solid #222; border-left: none;
            display: flex; align-items: center; justify-content: center;
            color: #444; font-family: 'PixeloidSansBold', sans-serif; font-size: 0.8rem;
            writing-mode: vertical-rl; text-orientation: upright;
        }

        /* --- SEARCH & MAIN UI --- */
        .search-wrapper { position: relative; width: 100%; max-width: 650px; padding: 10px; }
        .search-wrapper::before {
            content: '>'; position: absolute; left: 25px; top: 50%; transform: translateY(-50%);
            color: #fff; font-family: 'PixeloidSansBold', sans-serif; font-size: 1.5rem; z-index: 5;
            animation: blink 1s infinite;
        }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        .search-box { 
            width: 100%; background: #050505; border: 2px solid #222; color: white; 
            font-family: 'PixeloidSans', sans-serif; font-size: 1.3rem; padding: 18px 18px 18px 50px;
            outline: none; text-align: left; box-sizing: border-box; transition: 0.3s;
        }
        .search-box:focus { border-color: #fff; box-shadow: 0 0 15px rgba(255, 255, 255, 0.1); }

        .quick-links { margin-top: 50px; display: flex; gap: 30px; flex-wrap: wrap; justify-content: center; max-width: 800px; }
        .link-card { display: flex; flex-direction: column; align-items: center; gap: 10px; text-decoration: none; width: 80px; }
        .icon-box { width: 54px; height: 54px; background: #111; border: 2px solid #333; display: flex; align-items: center; justify-content: center; }
        .icon-box img { width: 32px; height: 32px; image-rendering: pixelated; pointer-events: none; }
        .link-label { color: #444; font-family: 'PixeloidSansBold', sans-serif; font-size: 0.65rem; text-transform: uppercase; text-align: center; }

        /* --- SETTINGS DRAWER (RIGHT) --- */
        #settings-drawer {
            position: fixed; top: 0; right: -350px; width: 350px; height: 100vh;
            background: #000; border-left: 2px solid #333; z-index: 2000;
            transition: right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            color: white; font-family: 'PixeloidSans', sans-serif; display: flex; flex-direction: column;
        }
        #settings-drawer.open { right: 0; }

        /* BEEFED UP GEAR TAB */
        #drawer-tab {
            position: absolute; left: -52px; bottom: 40px; 
            width: 50px; height: 50px; /* Made bigger */
            background: #000; border: 2px solid #333; border-right: none;
            display: flex; align-items: center; justify-content: center;
        }
        #drawer-tab img { 
            width: 32px; height: 32px; /* Image is bigger */
            transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1); 
        }
        .gear-spin { transform: rotate(90deg); }

        /* --- SPAWNED ENTITIES --- */
        .spawned-entity {
            position: absolute; width: 40px; height: 40px; 
            image-rendering: pixelated; pointer-events: auto !important; z-index: 1000;
        }

        .status-bar { 
            position: fixed; bottom: 20px; left: 30px; 
            font-family: 'PixeloidSansBold', sans-serif; font-size: 0.85rem; 
            color: #444; display: flex; align-items: center; gap: 15px; z-index: 5;
        }

        /* Add Entry Hover */
        .btn-add:hover { background: #fff !important; color: #000 !important; }
    </style>
</head>
<body>

    <div id="entity-vault">
        <div id="vault-tab">VAULT</div>
        <div style="font-family: 'PixeloidSansBold', sans-serif; color: #fff; border-bottom: 1px solid #222; padding-bottom: 10px;">ENTITY_VAULT</div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;">
            <div onclick="spawnEntity('gogin')" style="background:#111; border:1px solid #333; padding:10px; text-align:center;">
                <img src="images/gogin.png" style="width:40px;" onerror="this.src='images/plxeyestiny.png'">
            </div>
            <div onclick="spawnEntity('boogum')" style="background:#111; border:1px solid #333; padding:10px; text-align:center;">
                <img src="images/boogum.png" style="width:40px;" onerror="this.src='images/plxeyestiny.png'">
            </div>
        </div>
    </div>

    <div id="settings-drawer">
        <div id="drawer-tab">
            <img src="images/gear.png" id="gear-img" alt="Settings">
        </div>
        <div class="drawer-content" style="padding: 25px;">
            <div style="font-family: 'PixeloidSansBold', sans-serif; margin-bottom: 25px;">CORE_SYSTEM</div>
            <div id="manager-list"></div>
            <button class="btn-add" id="addNewBtn" style="width:100%; background:black; color:white; border:1px solid #333; padding:10px; margin-top:10px; font-family:'PixeloidSansBold';">+ ADD NEW_ENTRY</button>
        </div>
    </div>

    <div class="start-container" style="z-index: 10; display:flex; flex-direction:column; align-items:center;">
        <div id="clock" class="terminal-clock" style="font-family:'PixeloidSansBold'; font-size:3rem; color:white;">00:00:00</div>
        <div id="greeting">SYSTEM_ONLINE</div>
        <div class="search-wrapper">
            <input type="text" id="web-search" class="search-box" placeholder="type command..." autofocus autocomplete="off">
        </div>
        <div id="links-container" class="quick-links"></div>
    </div>

    <div class="status-bar" id="status-bar">
        <span>MIKEVOID_OS</span> // <span id="temp-val">LOADING...</span> // STATUS: NOMINAL
    </div>

    <script>
        // --- PHYSICS ENGINE ---
        const { Engine, Runner, Bodies, Composite, Mouse, MouseConstraint } = Matter;
        const engine = Engine.create();
        const runner = Runner.create();
        Runner.run(runner, engine);

        const ground = Bodies.rectangle(window.innerWidth/2, window.innerHeight+20, window.innerWidth, 40, { isStatic: true });
        const wallL = Bodies.rectangle(-20, window.innerHeight/2, 40, window.innerHeight, { isStatic: true });
        const wallR = Bodies.rectangle(window.innerWidth+20, window.innerHeight/2, 40, window.innerHeight, { isStatic: true });
        Composite.add(engine.world, [ground, wallL, wallR]);

        const mouse = Mouse.create(document.body);
        const mouseConstraint = MouseConstraint.create(engine, { mouse: mouse, constraint: { stiffness: 0.2, render: { visible: false } } });
        Composite.add(engine.world, mouseConstraint);

        function spawnEntity(type) {
            playSound('click');
            const imgPath = type === 'gogin' ? 'images/gogin.png' : 'images/boogum.png';
            const body = Bodies.rectangle(window.innerWidth/2, -50, 40, 40, { restitution: 0.6 });
            const el = document.createElement('img');
            el.src = imgPath; el.className = 'spawned-entity';
            el.onerror = () => el.src = 'images/plxeyestiny.png';
            document.body.appendChild(el);
            (function loop() {
                el.style.left = `${body.position.x - 20}px`;
                el.style.top = `${body.position.y - 20}px`;
                el.style.transform = `rotate(${body.angle}rad)`;
                requestAnimationFrame(loop);
            })();
            Composite.add(engine.world, body);
        }

        // --- CORE LOGIC ---
        let config = JSON.parse(localStorage.getItem('startConfig')) || {
            links: [{name: "HUB", url: "/blog/"}, {name: "YOUTUBE", url: "https://youtube.com"}]
        };
        const save = () => localStorage.setItem('startConfig', JSON.stringify(config));

        const audioAssets = {
            hover: new Audio('sounds/hoverbutton.wav'),
            click: new Audio('sounds/buttonclick.mp3'),
            mouse: new Audio('sounds/mouse1.mp3')
        };
        const playSound = (t) => { 
            let a = (t === 'click' ? audioAssets.click : audioAssets.hover).cloneNode();
            a.volume = 0.2; a.play().catch(()=>{}); 
        };

        window.addEventListener('mousedown', () => {
            let m = audioAssets.mouse.cloneNode(); m.volume = 0.05; m.play().catch(()=>{});
        });

        // GEAR SPIN & DRAWER TOGGLE
        const gearImg = document.getElementById('gear-img');
        document.getElementById('drawer-tab').onclick = (e) => {
            e.stopPropagation();
            playSound('click');
            gearImg.classList.toggle('gear-spin');
            document.getElementById('settings-drawer').classList.toggle('open');
        };

        document.getElementById('vault-tab').onclick = (e) => {
            e.stopPropagation(); playSound('click');
            document.getElementById('entity-vault').classList.toggle('open');
        };

        function updateClock() {
            const now = new Date();
            let h = now.getHours(); const m = String(now.getMinutes()).padStart(2, '0'); const s = String(now.getSeconds()).padStart(2, '0');
            const ampm = h >= 12 ? 'PM' : 'AM'; h = h % 12 || 12;
            document.getElementById('clock').innerText = `${h}:${m}:${s} ${ampm}`;
        }
        setInterval(updateClock, 1000); updateClock();

        function renderAll() {
            const container = document.getElementById('links-container');
            container.innerHTML = '';
            config.links.forEach(link => {
                const card = document.createElement('a');
                card.className = 'link-card'; card.href = link.url;
                card.innerHTML = `<div class="icon-box"><img src="https://www.google.com/s2/favicons?domain=${new URL(link.url).hostname}&sz=64"></div><div class="link-label">${link.name}</div>`;
                card.onmouseenter = () => playSound('hover');
                container.appendChild(card);
            });
        }
        renderAll();

        document.getElementById('addNewBtn').onclick = () => {
            playSound('click'); config.links.push({name: "NEW", url: "https://"}); save(); renderAll();
        };

    </script>
</body>
</html>